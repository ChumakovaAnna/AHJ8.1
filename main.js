(()=>{var e={3099:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},9670:(e,t,r)=>{var n=r(111);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},8533:(e,t,r)=>{"use strict";var n=r(2092).forEach,o=r(9341)("forEach");e.exports=o?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},1318:(e,t,r)=>{var n=r(5656),o=r(7466),i=r(1400),s=function(e){return function(t,r,s){var a,c=n(t),u=o(c.length),f=i(s,u);if(e&&r!=r){for(;u>f;)if((a=c[f++])!=a)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===r)return e||f||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},2092:(e,t,r)=>{var n=r(9974),o=r(8361),i=r(7908),s=r(7466),a=r(5417),c=[].push,u=function(e){var t=1==e,r=2==e,u=3==e,f=4==e,l=6==e,p=7==e,v=5==e||l;return function(h,y,d,g){for(var m,b,w=i(h),x=o(w),S=n(y,d,3),L=s(x.length),E=0,O=g||a,T=t?O(h,L):r||p?O(h,0):void 0;L>E;E++)if((v||E in x)&&(b=S(m=x[E],E,w),e))if(t)T[E]=b;else if(b)switch(e){case 3:return!0;case 5:return m;case 6:return E;case 2:c.call(T,m)}else switch(e){case 4:return!1;case 7:c.call(T,m)}return l?-1:u||f?f:T}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},1194:(e,t,r)=>{var n=r(7293),o=r(5112),i=r(7392),s=o("species");e.exports=function(e){return i>=51||!n((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:(e,t,r)=>{"use strict";var n=r(7293);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},7475:(e,t,r)=>{var n=r(111),o=r(3157),i=r(5112)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)?n(t)&&null===(t=t[i])&&(t=void 0):t=void 0),void 0===t?Array:t}},5417:(e,t,r)=>{var n=r(7475);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},4326:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},9920:(e,t,r)=>{var n=r(6656),o=r(3887),i=r(1236),s=r(3070);e.exports=function(e,t){for(var r=o(t),a=s.f,c=i.f,u=0;u<r.length;u++){var f=r[u];n(e,f)||a(e,f,c(t,f))}}},8880:(e,t,r)=>{var n=r(9781),o=r(3070),i=r(9114);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},9114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:(e,t,r)=>{"use strict";var n=r(4948),o=r(3070),i=r(9114);e.exports=function(e,t,r){var s=n(t);s in e?o.f(e,s,i(0,r)):e[s]=r}},9781:(e,t,r)=>{var n=r(7293);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:(e,t,r)=>{var n=r(7854),o=r(111),i=n.document,s=o(i)&&o(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},8324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8113:(e,t,r)=>{var n=r(5005);e.exports=n("navigator","userAgent")||""},7392:(e,t,r)=>{var n,o,i=r(7854),s=r(8113),a=i.process,c=i.Deno,u=a&&a.versions||c&&c.version,f=u&&u.v8;f?o=(n=f.split("."))[0]<4?1:n[0]+n[1]:s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(o=n[1]),e.exports=o&&+o},748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(e,t,r)=>{var n=r(7854),o=r(1236).f,i=r(8880),s=r(1320),a=r(3505),c=r(9920),u=r(4705);e.exports=function(e,t){var r,f,l,p,v,h=e.target,y=e.global,d=e.stat;if(r=y?n:d?n[h]||a(h,{}):(n[h]||{}).prototype)for(f in t){if(p=t[f],l=e.noTargetGet?(v=o(r,f))&&v.value:r[f],!u(y?f:h+(d?".":"#")+f,e.forced)&&void 0!==l){if(typeof p==typeof l)continue;c(p,l)}(e.sham||l&&l.sham)&&i(p,"sham",!0),s(r,f,p,e)}}},7293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},9974:(e,t,r)=>{var n=r(3099);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},5005:(e,t,r)=>{var n=r(7854),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(n[e]):n[e]&&n[e][t]}},7854:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},6656:(e,t,r)=>{var n=r(7908),o={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return o.call(n(e),t)}},3501:e=>{e.exports={}},4664:(e,t,r)=>{var n=r(9781),o=r(7293),i=r(317);e.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:(e,t,r)=>{var n=r(7293),o=r(4326),i="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},2788:(e,t,r)=>{var n=r(5465),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return o.call(e)}),e.exports=n.inspectSource},9909:(e,t,r)=>{var n,o,i,s=r(8536),a=r(7854),c=r(111),u=r(8880),f=r(6656),l=r(5465),p=r(6200),v=r(3501),h="Object already initialized",y=a.WeakMap;if(s||l.state){var d=l.state||(l.state=new y),g=d.get,m=d.has,b=d.set;n=function(e,t){if(m.call(d,e))throw new TypeError(h);return t.facade=e,b.call(d,e,t),t},o=function(e){return g.call(d,e)||{}},i=function(e){return m.call(d,e)}}else{var w=p("state");v[w]=!0,n=function(e,t){if(f(e,w))throw new TypeError(h);return t.facade=e,u(e,w,t),t},o=function(e){return f(e,w)?e[w]:{}},i=function(e){return f(e,w)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},3157:(e,t,r)=>{var n=r(4326);e.exports=Array.isArray||function(e){return"Array"==n(e)}},4705:(e,t,r)=>{var n=r(7293),o=/#|\.prototype\./,i=function(e,t){var r=a[s(e)];return r==u||r!=c&&("function"==typeof t?n(t):!!t)},s=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},a=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i},111:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},1913:e=>{e.exports=!1},2190:(e,t,r)=>{var n=r(5005),o=r(3307);e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return"function"==typeof t&&Object(e)instanceof t}},133:(e,t,r)=>{var n=r(7392),o=r(7293);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},8536:(e,t,r)=>{var n=r(7854),o=r(2788),i=n.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},3070:(e,t,r)=>{var n=r(9781),o=r(4664),i=r(9670),s=r(4948),a=Object.defineProperty;t.f=n?a:function(e,t,r){if(i(e),t=s(t),i(r),o)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},1236:(e,t,r)=>{var n=r(9781),o=r(5296),i=r(9114),s=r(5656),a=r(4948),c=r(6656),u=r(4664),f=Object.getOwnPropertyDescriptor;t.f=n?f:function(e,t){if(e=s(e),t=a(t),u)try{return f(e,t)}catch(e){}if(c(e,t))return i(!o.f.call(e,t),e[t])}},8006:(e,t,r)=>{var n=r(6324),o=r(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},5181:(e,t)=>{t.f=Object.getOwnPropertySymbols},6324:(e,t,r)=>{var n=r(6656),o=r(5656),i=r(1318).indexOf,s=r(3501);e.exports=function(e,t){var r,a=o(e),c=0,u=[];for(r in a)!n(s,r)&&n(a,r)&&u.push(r);for(;t.length>c;)n(a,r=t[c++])&&(~i(u,r)||u.push(r));return u}},5296:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},2140:(e,t,r)=>{var n=r(111);e.exports=function(e,t){var r,o;if("string"===t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if("string"!==t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},3887:(e,t,r)=>{var n=r(5005),o=r(8006),i=r(5181),s=r(9670);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(s(e)),r=i.f;return r?t.concat(r(e)):t}},1320:(e,t,r)=>{var n=r(7854),o=r(8880),i=r(6656),s=r(3505),a=r(2788),c=r(9909),u=c.get,f=c.enforce,l=String(String).split("String");(e.exports=function(e,t,r,a){var c,u=!!a&&!!a.unsafe,p=!!a&&!!a.enumerable,v=!!a&&!!a.noTargetGet;"function"==typeof r&&("string"!=typeof t||i(r,"name")||o(r,"name",t),(c=f(r)).source||(c.source=l.join("string"==typeof t?t:""))),e!==n?(u?!v&&e[t]&&(p=!0):delete e[t],p?e[t]=r:o(e,t,r)):p?e[t]=r:s(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||a(this)}))},4488:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},3505:(e,t,r)=>{var n=r(7854);e.exports=function(e,t){try{Object.defineProperty(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},6200:(e,t,r)=>{var n=r(2309),o=r(9711),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},5465:(e,t,r)=>{var n=r(7854),o=r(3505),i="__core-js_shared__",s=n[i]||o(i,{});e.exports=s},2309:(e,t,r)=>{var n=r(1913),o=r(5465);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.16.3",mode:n?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},1400:(e,t,r)=>{var n=r(9958),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},5656:(e,t,r)=>{var n=r(8361),o=r(4488);e.exports=function(e){return n(o(e))}},9958:e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},7466:(e,t,r)=>{var n=r(9958),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},7908:(e,t,r)=>{var n=r(4488);e.exports=function(e){return Object(n(e))}},7593:(e,t,r)=>{var n=r(111),o=r(2190),i=r(2140),s=r(5112)("toPrimitive");e.exports=function(e,t){if(!n(e)||o(e))return e;var r,a=e[s];if(void 0!==a){if(void 0===t&&(t="default"),r=a.call(e,t),!n(r)||o(r))return r;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),i(e,t)}},4948:(e,t,r)=>{var n=r(7593),o=r(2190);e.exports=function(e){var t=n(e,"string");return o(t)?t:String(t)}},9711:e=>{var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},3307:(e,t,r)=>{var n=r(133);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:(e,t,r)=>{var n=r(7854),o=r(2309),i=r(6656),s=r(9711),a=r(133),c=r(3307),u=o("wks"),f=n.Symbol,l=c?f:f&&f.withoutSetter||s;e.exports=function(e){return i(u,e)&&(a||"string"==typeof u[e])||(a&&i(f,e)?u[e]=f[e]:u[e]=l("Symbol."+e)),u[e]}},2222:(e,t,r)=>{"use strict";var n=r(2109),o=r(7293),i=r(3157),s=r(111),a=r(7908),c=r(7466),u=r(6135),f=r(5417),l=r(1194),p=r(5112),v=r(7392),h=p("isConcatSpreadable"),y=9007199254740991,d="Maximum allowed index exceeded",g=v>=51||!o((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),m=l("concat"),b=function(e){if(!s(e))return!1;var t=e[h];return void 0!==t?!!t:i(e)};n({target:"Array",proto:!0,forced:!g||!m},{concat:function(e){var t,r,n,o,i,s=a(this),l=f(s,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(b(i=-1===t?s:arguments[t])){if(p+(o=c(i.length))>y)throw TypeError(d);for(r=0;r<o;r++,p++)r in i&&u(l,p,i[r])}else{if(p>=y)throw TypeError(d);u(l,p++,i)}return l.length=p,l}})},4747:(e,t,r)=>{var n=r(7854),o=r(8324),i=r(8533),s=r(8880);for(var a in o){var c=n[a],u=c&&c.prototype;if(u&&u.forEach!==i)try{s(u,"forEach",i)}catch(e){u.forEach=i}}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.url="wss://ahj8-2.herokuapp.com/ws",this.widget=e,this.user=null,this.response=null}var r,n,o;return r=t,(n=[{key:"init",value:function(){var e=this;this.wsConnect(),this.widget.container.addEventListener("submit",(function(t){t.preventDefault();var r=t.target;if(r.classList.contains("registration__form")){var n=r.querySelector(".registration__input"),o=n.value;e.sendName(o),n.value=""}if(r.classList.contains("form_new_message")){var i=r.querySelector(".new_message"),s=i.value;e.sendMessage(s),i.value=""}})),document.addEventListener("click",(function(){e.widget.closeError()}))}},{key:"sendName",value:function(e){this.user=e;var t={type:"login",value:this.user};this.ws.send(JSON.stringify(t))}},{key:"sendMessage",value:function(e){var t={type:"newMessage",value:e,user:this.user};this.ws.send(JSON.stringify(t))}},{key:"wsConnect",value:function(){var e=this;this.ws=new WebSocket(this.url),this.ws.binaryType="blob",this.ws.addEventListener("open",(function(){console.log("connected people")})),this.ws.addEventListener("close",(function(e){console.log("server close",e)})),this.ws.addEventListener("message",(function(t){e.response=null,e.ws.readyState===WebSocket.OPEN?(e.response=JSON.parse(t.data),"users"===e.response.type&&e.user&&e.widget.renderUsersList(e.response.users,e.user),"messages"===e.response.type&&e.widget.renderChat(e.response.messages,e.user),"error"===e.response.type&&e.widget.renderError(e.response.text)):console.log(t.code)})),this.ws.addEventListener("error",(function(e){console.log(e)}))}},{key:"getResponse",value:function(){return this.response}}])&&e(r.prototype,n),o&&e(r,o),t}();r(4747),r(2222);function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}new t(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=document.querySelector(".widget"),this.chat=document.querySelector(".chat"),this.registration=document.querySelector(".registration"),this.usersList=document.querySelector(".users_list"),this.error=document.querySelector(".popover")}var t,r,o;return t=e,(r=[{key:"renderUsersList",value:function(e,t){this.closeRegistration(),this.usersList.classList.remove("hidden");var r=this.usersList.querySelector("ul");r.innerHTML="",e.forEach((function(e){r.innerHTML+=e===t?'<li class="valid">YOU</li>':'<li class="">'.concat(e,"</li>")}))}},{key:"changeName",value:function(){this.loginLabel.style.color="red",this.loginInput.classList.add("invalid"),this.loginLabel.innerHTML="Select another name"}},{key:"nameIsOk",value:function(){this.loginDiv.classList.add("hidden"),this.loginLabel.style.color="inherit",this.loginInput.classList.remove("invalid"),this.loginLabel.innerHTML="Enter your name"}},{key:"renderError",value:function(e){this.error.classList.contains("hidden")&&this.error.classList.remove("hidden"),this.error.innerHTML="\n    <p>".concat(e,"</p>\n    ")}},{key:"renderChat",value:function(e,t){this.chat.classList.remove("hidden");var r=this.chat.querySelector(".conversations");r.innerHTML="",e.forEach((function(e){e.user===t?r.innerHTML+='\n        <div class="message you">\n        <span>YOU, '.concat(e.date,"</span>\n        ").concat(e.message,"\n        </div>\n        "):r.innerHTML+='\n        <div class="message">\n        <span>'.concat(e.user,", ").concat(e.date,"</span>\n        ").concat(e.message,"\n        </div>\n        ")}))}},{key:"closeError",value:function(){this.error.classList.contains("hidden")||this.error.classList.add("hidden")}},{key:"closeRegistration",value:function(){this.registration.classList.contains("hidden")||this.registration.classList.add("hidden")}}])&&n(t.prototype,r),o&&n(t,o),e}())).init()})()})();